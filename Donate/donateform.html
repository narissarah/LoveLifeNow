<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Make a Donation</title>
  <!-- Importing the font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      background-color: #f5f5f5;
      font-family: 'Poppins', sans-serif;
      padding: 40px;
    }

    /* Base Form Styles (Adapted for .donation-form) */
    .donation-form {
      font-family: "Poppins", "Inter", sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 30px;
      background: #fff;
      color: #333;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .donation-form h3 {
      color: #9b51e0;
      /* Purple heading */
      font-weight: 600;
      margin-bottom: 25px;
      font-size: 24px;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 10px;
    }

    .donation-form .field {
      margin-bottom: 20px;
      width: 100%;
      box-sizing: border-box;
    }

    .donation-form label {
      display: block;
      margin-bottom: 8px;
      color: #8b348f;
      /* Purple label text */
      font-weight: 500;
      font-size: 15px;
    }

    .donation-form label.error {
      color: #d32f2f;
      font-size: 12px;
      margin-top: 5px;
      display: block;
    }

    .donation-form .required-star {
      color: #d32f2f;
      margin-left: 4px;
    }

    /* Inputs & Textareas */
    .donation-form input[type="text"],
    .donation-form input[type="email"],
    .donation-form input[type="tel"],
    .donation-form input[type="number"],
    .donation-form input[type="date"],
    .donation-form textarea,
    .donation-form select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
      transition: border-color 0.3s, box-shadow 0.3s;
      background: #fff;
      border-color: #d4a5d9;
      /* Light purple border */
    }

    .donation-form input:focus,
    .donation-form textarea:focus,
    .donation-form select:focus {
      border-color: #9b51e0;
      outline: none;
      box-shadow: 0 0 0 3px rgba(155, 81, 224, 0.1);
    }

    /* Radio Buttons & Checkboxes */
    .donation-form .field.radio,
    .donation-form .field.checkbox {
      position: relative;
      padding-left: 30px;
      margin-bottom: 12px;
    }

    .donation-form .field.radio label,
    .donation-form .field.checkbox label {
      font-weight: 400;
      color: #333;
      display: inline-block;
      cursor: pointer;
    }

    .donation-form .field.radio input,
    .donation-form .field.checkbox input {
      position: absolute;
      left: 0;
      top: 2px;
      width: 20px;
      height: 20px;
      margin: 0;
      accent-color: #9b51e0;
    }

    /* Donation Levels Styling */
    .section.donation .field.radio {
      background: #fafafa;
      padding: 15px 15px 15px 45px;
      border-radius: 6px;
      border: 1px solid #eee;
      margin-bottom: 10px;
      transition: background 0.2s;
    }

    .section.donation .field.radio:hover {
      background: #fdfdfd;
      border-color: #d4a5d9;
    }

    .section.donation .field.other-amount {
      margin-top: 10px;
    }

    .section.donation #other-amount {
      max-width: 200px;
    }


    /* Name Fields Layout - Side by Side */
    .section.contact .field.first-name,
    .section.contact .field.last-name {
      display: inline-block;
      width: 48%;
      vertical-align: top;
    }

    .section.contact .field.first-name {
      margin-right: 3%;
    }

    /* Address Layout */
    .section.billing-address .field.city,
    .section.billing-address .field.state,
    .section.billing-address .field.zip-code {
      display: inline-block;
      vertical-align: top;
    }

    .section.billing-address .field.city {
      width: 40%;
      margin-right: 2%;
    }

    .section.billing-address .field.state {
      width: 28%;
      margin-right: 2%;
    }

    .section.billing-address .field.zip-code {
      width: 28%;
    }


    @media (max-width: 600px) {

      .section.contact .field.first-name,
      .section.contact .field.last-name,
      .section.billing-address .field.city,
      .section.billing-address .field.state,
      .section.billing-address .field.zip-code {
        display: block;
        width: 100%;
        margin-right: 0;
      }
    }

    .donation-form .btn-group {
      text-align: center;
      margin-top: 30px;
    }

    .donation-form .btn-submit {
      background-color: #8b348f;
      color: white;
      border: none;
      padding: 16px 45px;
      font-size: 19px;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      max-width: 350px;
      transition: background-color 0.3s;
      text-transform: uppercase;
      box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .donation-form .btn-submit:hover {
      background-color: #6a246d;
      transform: translateY(-1px);
    }

    .donation-form .hidden {
      display: none;
    }

    .donation-form .consent {
      font-size: 12px;
      color: #666;
      margin-top: 10px;
      font-style: italic;
    }

    /* Payment Section */
    .section.payment {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
    }

    #card-element {
      padding: 10px;
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
    }

    .toggle-section {
      margin-left: 20px;
      border-left: 2px solid #ddd;
      padding-left: 15px;
    }
  </style>

  <!-- Mock Helpers -->
  <script>
    // Mock Accounting.js for format/unformat
    var accounting = {
      unformat: function (val) { return parseFloat((val || "0").toString().replace(/[^0-9\.-]+/g, "")) || 0; },
      formatMoney: function (val) { return "$" + (parseFloat(val) || 0).toFixed(2); },
      parse: function (val) { return this.unformat(val); }
    };

    // Bloomerang Object Logic
    var Bloomerang = {
      useDonationId: function () { return true; },
      useProcessor: function () { },
      useKey: function () { },
      transactionFee: 0.3,
      transactionFeeRate: 0.032,
      transactionFeePayPal: 0.49,
      transactionFeeRatePayPal: 0.032,
      Util: {
        isProcessorOnePay: function () { return false; },
        isProcessorStripe: function () { return true; }, // Assuming Stripe for this form
        requireStripe: function (cb) { if (cb) cb(); },
        load: function (url, check, onload) { if (onload) onload(); },
        requireJQueryValidation: function (cb) { cb(); },
        getDonationAmount: function () {
          var val = $("input[name='donation-level']:checked").val();
          if (!val && $("#other-option").prop("checked")) val = $("#other-amount").val();
          return Number(accounting.unformat(val));
        },
        updateDonateButtonText: function () {
          var amount = Bloomerang.Util.getDonationAmount();
          var impactAmount = Bloomerang.Util.getDonationTrueImpactAmount();
          $(".btn-submit-donation").val("Donate Now " + accounting.formatMoney(amount + impactAmount));
        },
        getDonationTrueImpactAmount: function () {
          if ($(".true-impact input:checked").length) {
            return Bloomerang.Util.calculateDonationTrueImpact();
          }
          return 0;
        },
        calculateDonationTrueImpact: function () {
          var amount = Bloomerang.Util.getDonationAmount();
          if (amount === 0) {
            $(".true-impact .fee-amount").text(accounting.formatMoney(0));
            return 0;
          }

          // Simplified fee calc for mock
          var feeRate = Bloomerang.transactionFeeRate;
          var fixedFee = Bloomerang.transactionFee;

          if ($("#PayPalVenmo").is(":checked") || $("#PayPal").is(":checked")) {
            feeRate = Bloomerang.transactionFeeRatePayPal;
            fixedFee = Bloomerang.transactionFeePayPal;
          }

          var newTotal = (amount + fixedFee) / (1 - feeRate);
          var impactAmount = Number((Math.floor((newTotal - amount) * 100) / 100).toFixed(2));

          $(".true-impact .fee-amount").text(accounting.formatMoney(impactAmount));
          return impactAmount;
        },
        isCountryInEurope: function () { return false; }, // Simplified
        addLog: function (msg) { console.log(msg); }
      },
      Widget: { Donation: {} },
      Api: {
        donate: function () { alert('Donation Submitted!'); },
        recurringDonate: function () { alert('Recurring Donation Submitted!'); }
      },
      Data: { WidgetIds: { Donation: '535552' } }
    };
    var grecaptcha = { ready: function (cb) { cb(); }, execute: function () { return Promise.resolve('token'); }, render: function () { }, getResponse: function () { } };
  </script>
</head>

<body>

  <div id="donation-form-container">
    <form id="donation-form" class="donation-form" method="post" action="javascript:void(0)">
      <div class="errors hidden"></div>
      <div class="section donation">
        <h3>Donation Amount</h3>
        <div class="field radio 537600 required">
          <label for="537600"><input id="537600" name="donation-level" class="required" type="radio"
              value="50.000000"><span class="label">$50.00 - Transportation</span></label>
        </div>
        <div class="field radio 537601 required">
          <label for="537601"><input id="537601" name="donation-level" class="required" type="radio"
              value="100.000000"><span class="label">$100.00 - Food</span></label>
        </div>
        <div class="field radio 537602 required">
          <label for="537602"><input id="537602" name="donation-level" class="required" type="radio"
              value="200.000000"><span class="label">$200.00 - Socks</span></label>
        </div>
        <div class="field radio 537603 required">
          <label for="537603"><input id="537603" name="donation-level" class="required" type="radio"
              value="500.000000"><span class="label">$500.00 - Emergency Stays</span></label>
        </div>
        <div class="field radio 537604 required">
          <label for="537604"><input id="537604" name="donation-level" class="required" type="radio" value=""><span
              class="label">Donate Any Amount</span></label>
        </div>
        <div class="field radio other-option required">
          <label for="other-option"><input id="other-option" name="donation-level" class="required" type="radio"><span
              class="label">Other</span></label>
        </div>
        <div class="field text other-amount">
          <input id="other-amount" name="other-amount" class="otherAmount" type="text" placeholder="$0.00">
        </div>
      </div>

      <div class="section recurring">
        <div class="field checkbox recurring">
          <label for="recurring"><input id="recurring" name="recurring" type="checkbox"><span class="label">Show my
              support by making this a recurring donation</span></label>
        </div>
        <div class="field frequency required" style="display: none">
          <label for="frequency">Frequency<span class="required-star">*</span></label>
          <select id="frequency" name="frequency" class="required">
            <option value=""></option>
            <option value="Weekly">Weekly</option>
            <option value="Monthly" selected>Monthly</option>
            <option value="Quarterly">Quarterly</option>
            <option value="SemiAnnually">Every six months</option>
            <option value="Yearly">Yearly</option>
          </select>
        </div>
        <div class="field date start-date required" style="display: none">
          <label for="start-date"><span class="label">Start Date</span><span class="required-star">*</span></label>
          <input id="start-date" name="start-date" class="validDate startDateVenmo required" type="date"
            placeholder="mm/dd/yyyy">
        </div>
      </div>

      <div class="section true-impact">
        <div class="field checkbox true-impact">
          <label for="true-impact"><input id="true-impact" name="true-impact" type="checkbox"><span class="label">Add
              <span class='fee-amount'>$0</span> to help cover our transaction fees</span></label>
        </div>
      </div>

      <div class="section contact">
        <h3>Contact Information</h3>
        <div class="field text first-name required">
          <label for="first-name"><span class="label">First Name</span><span class="required-star">*</span></label>
          <input id="first-name" name="first-name" class="required" type="text">
        </div>
        <div class="field text last-name required">
          <label for="last-name"><span class="label">Last Name</span><span class="required-star">*</span></label>
          <input id="last-name" name="last-name" class="required" type="text">
        </div>
        <div class="field email email-address required">
          <label for="email-address"><span class="label">Email</span><span class="required-star">*</span></label>
          <input id="email-address" name="email-address" class="email required" type="email"
            placeholder="someone@website.com">
        </div>
        <div class="field tel phone-number">
          <label for="phone-number"><span class="label">Phone</span></label>
          <input id="phone-number" name="phone-number" class="phoneUS" type="tel">
        </div>
      </div>

      <div class="section billing-address">
        <h3>Address</h3>
        <div class="field country required">
          <label for="country">Country<span class="required-star">*</span></label>
          <select id="country" name="country" class="required">
            <option value="US" selected>United States</option>
            <option value="CA">Canada</option>
            <option value="GB">United Kingdom</option>
            <!-- Simplified list for demo, full list was huge -->
          </select>
        </div>
        <div class="field street-address required">
          <label for="street-address"><span class="label">Address</span><span class="required-star">*</span></label>
          <textarea id="street-address" name="street-address" class="required" rows="2"></textarea>
        </div>
        <div class="field text city required">
          <label for="city"><span class="label">City</span><span class="required-star">*</span></label>
          <input id="city" name="city" class="required" type="text">
        </div>
        <div class="field state required">
          <label for="state">State<span class="required-star">*</span></label>
          <select id="state" name="state" class="required">
            <option value=""></option>
            <option value="MA">Massachusetts</option>
            <option value="NY">New York</option>
            <option value="CA">California</option>
            <!-- Simplified list -->
          </select>
        </div>
        <div class="field number zip-code required">
          <label for="zip-code"><span class="label">ZIP Code</span><span class="required-star">*</span></label>
          <input id="zip-code" name="zip-code" class="zipcodeUS required" type="text">
        </div>
      </div>

      <div class="section comment">
        <div class="field text comment">
          <label for="comment"><span class="label">Comments</span></label>
          <textarea id="comment" name="comment"></textarea>
        </div>
      </div>

      <div class="section payment">
        <h3>Payment Method</h3>
        <div class="field radio CreditCard required">
          <label for="CreditCard"><input id="CreditCard" name="payment-type" class="required" type="radio" checked><span
              class="label">Credit / Debit Card</span></label>
        </div>
        <div class="field radio PayPalVenmo required">
          <label for="PayPalVenmo"><input id="PayPalVenmo" name="payment-type" class="required" type="radio"><span
              class="label">PayPal or Venmo</span></label>
        </div>

        <div class="field text payment required" id="stripe-cc-fields">
          <!-- Mock Stripe Element -->
          <div style="padding: 15px; border: 1px dashed #ccc; background: #fdfdfd; text-align: center; color: #777;">
            [Stripe Secure Payment Element Would Load Here]
          </div>
        </div>

        <div id="paypal-button-container" style="display:none; padding:15px; text-align:center;">
          [PayPal Button Would Load Here]
        </div>
      </div>

      <div class="btn-group">
        <input class="btn btn-submit btn-submit-donation" type="submit" value="Donate Now" />
      </div>
    </form>
  </div>

  <script>
    jQuery(document).ready(function () {

      // --- Form Logic Copied & Adapted ---

      // Toggle other amount
      var toggleOtherAmountRequired = function () {
        $("#other-amount").toggleClass("required", $("#other-option").prop("checked"));
        Bloomerang.Util.calculateDonationTrueImpact();
      };

      $("input[name='donation-level']").change(function () {
        toggleOtherAmountRequired();
        Bloomerang.Util.updateDonateButtonText();
        // Clear other amount if not selected
        if (this.id !== "other-option") {
          // Optional: keep it or clear it? Original keeps it visible but changes requirements.
        }
      });

      $("#other-amount").change(function () {
        $("#other-option").val($(this).val());
        $("#other-option").prop('checked', true);
        Bloomerang.Util.calculateDonationTrueImpact();
        Bloomerang.Util.updateDonateButtonText();
      });

      $("#donation-amount").change(function () {
        Bloomerang.Util.calculateDonationTrueImpact();
        Bloomerang.Util.updateDonateButtonText();
      });

      // Recurring toggle
      $(".field.recurring").change(function () {
        if ($("#recurring").is(":checked")) {
          $(".frequency, .start-date").slideDown();
        } else {
          $(".frequency, .start-date").slideUp();
        }
      });

      // True Impact
      $("#true-impact").change(function () {
        var impact = Bloomerang.Util.calculateDonationTrueImpact();
        Bloomerang.Util.updateDonateButtonText();
      });

      // Payment Method Toggles
      $("input[name='payment-type']").click(function () {
        Bloomerang.Util.calculateDonationTrueImpact();
        Bloomerang.Util.updateDonateButtonText();

        if (this.id == "CreditCard") {
          $("#stripe-cc-fields").slideDown();
          $("#paypal-button-container").slideUp();
        } else {
          $("#stripe-cc-fields").slideUp();
          $("#paypal-button-container").slideDown();
        }
      });

      // Submission Mock
      $("#donation-form").submit(function (e) {
        e.preventDefault();
        var processing = $(".btn-submit-donation");
        processing.val("Processing...");
        setTimeout(function () {
          alert("Donation Simulation Successful! (Amount: " + $(".btn-submit-donation").val() + ")");
          processing.val("Donate Now");
        }, 1000);
      });

      // Initialize Fee
      Bloomerang.Util.calculateDonationTrueImpact();
    });
  </script>

</body>

</html>