<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate - Love Life Now Foundation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <link href="../shared/forms.css" rel="stylesheet">
    <style>
        /* Embed-specific styles - no header/footer for Wix */
        body {
            background: transparent;
            min-height: auto;
        }
        .page-wrapper {
            min-height: auto;
        }
        .form-container {
            max-width: none;
            margin: 0;
            padding: 0;
        }
        .form-card {
            background: white;
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
        }
        .form-header {
            background: linear-gradient(135deg, var(--lln-purple-700) 0%, var(--lln-purple-900) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        .form-header h1 {
            font-family: var(--font-heading);
            font-size: 1.75rem;
            margin: 0 0 0.5rem;
        }
        .form-header p {
            opacity: 0.9;
            margin: 0;
            font-size: 0.95rem;
        }
        .form-body {
            padding: 1rem;
        }
        /* Donation form specific styles */
        .donation-form .field.radio label {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border: 1px solid var(--lln-gray-200);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .donation-form .field.radio label:hover {
            border-color: var(--lln-purple-400);
            background: var(--lln-purple-50);
        }
        .donation-form .field.radio input:checked + .label {
            color: var(--lln-purple-700);
            font-weight: 600;
        }
        .donation-form .field.radio input {
            margin-right: 0.75rem;
        }
        .donation-form .section.recurring {
            background: var(--lln-gray-50);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }
        .donation-form .field.other-amount {
            display: inline-block;
            margin-left: 1rem;
        }
        .donation-form #other-amount {
            width: 100px;
        }
        .donation-form #card-element {
            padding: 0.75rem 1rem;
            border: 1px solid var(--lln-gray-200);
            border-radius: 0.5rem;
            background: white;
        }
        .donation-form #card-errors {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        .donation-form .field.true-impact label {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }
        #donation-processing-container {
            text-align: center;
            padding: 3rem;
        }
        #donation-processing-container h2 {
            color: var(--lln-purple-700);
        }
        /* Hide form card until loaded */
        .form-card {
            display: none;
        }
        .form-card.loaded {
            display: block;
        }
        /* Loading spinner */
        .form-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
        }
        .form-loading .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--lln-purple-100);
            border-top-color: var(--lln-purple-600);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .form-loading.hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="page-wrapper">
        <div class="form-container">
            <div class="form-loading" id="form-loading">
                <div class="spinner"></div>
            </div>
            <div class="form-card" id="form-card">
                <div class="form-body">
                    <div id="bloomerang-form-container">
                        <script type="text/javascript" id="bloomerangForm535552"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bloomerang Donation Form Template -->
    <template id="styled-form-content">
        <div id="donation-form-container">
            <form id="donation-form" class="donation-form" method="post" onsubmit="event.preventDefault(); collectPayment();">
                <div class="errors hidden"></div>

                <div class="section donation">
                    <h3>Choose Your Gift Amount</h3>
                    <div class="field radio 537600 required">
                        <label for="537600">
                            <input id="537600" name="donation-level" class="required" type="radio" value="50.000000">
                            <span class="label">$50.00 - Transportation</span>
                        </label>
                    </div>
                    <div class="field radio 537601 required">
                        <label for="537601">
                            <input id="537601" name="donation-level" class="required" type="radio" value="100.000000">
                            <span class="label">$100.00 - Food</span>
                        </label>
                    </div>
                    <div class="field radio 537602 required">
                        <label for="537602">
                            <input id="537602" name="donation-level" class="required" type="radio" value="200.000000">
                            <span class="label">$200.00 - Socks</span>
                        </label>
                    </div>
                    <div class="field radio 537603 required">
                        <label for="537603">
                            <input id="537603" name="donation-level" class="required" type="radio" value="500.000000">
                            <span class="label">$500.00 - Emergency Stays</span>
                        </label>
                    </div>
                    <div class="field radio 537604 required">
                        <label for="537604">
                            <input id="537604" name="donation-level" class="required" type="radio">
                            <span class="label">$0.00 - Donate Any Amount</span>
                        </label>
                    </div>
                    <div class="field radio other-option required">
                        <label for="other-option">
                            <input id="other-option" name="donation-level" class="required" type="radio">
                            <span class="label">Other</span>
                        </label>
                    </div>
                    <div class="field text other-amount">
                        <input id="other-amount" name="other-amount" class="otherAmount" type="text" placeholder="$0.00">
                    </div>
                </div>

                <div class="section recurring">
                    <div class="field checkbox recurring">
                        <label for="recurring">
                            <input id="recurring" name="recurring" type="checkbox">
                            <span class="label">Show my support by making this a recurring donation</span>
                        </label>
                    </div>
                    <div class="field frequency required" style="display: none">
                        <label for="frequency">Frequency<span class="required-star">*</span></label>
                        <select id="frequency" name="frequency" class="required">
                            <option value=""></option>
                            <option value="Weekly">Weekly</option>
                            <option value="Monthly" selected>Monthly</option>
                            <option value="Quarterly">Quarterly</option>
                            <option value="SemiAnnually">Every six months</option>
                            <option value="Yearly">Yearly</option>
                        </select>
                    </div>
                    <div class="field date start-date required" style="display: none">
                        <label for="start-date"><span class="label">Start Date</span><span class="required-star">*</span></label>
                        <input id="start-date" name="start-date" class="validDate startDateVenmo required" type="date" placeholder="mm/dd/yyyy">
                    </div>
                </div>

                <div class="section true-impact">
                    <div class="field checkbox true-impact">
                        <label for="true-impact">
                            <input id="true-impact" name="true-impact" type="checkbox">
                            <span class="label">Add [amount] to help cover our transaction fees</span>
                        </label>
                    </div>
                </div>

                <div class="section contact">
                    <h3>Contact Information</h3>
                    <div class="form-row">
                        <div class="field text first-name required">
                            <label for="first-name"><span class="label">First Name</span><span class="required-star">*</span></label>
                            <input id="first-name" name="first-name" class="required" type="text">
                        </div>
                        <div class="field text last-name required">
                            <label for="last-name"><span class="label">Last Name</span><span class="required-star">*</span></label>
                            <input id="last-name" name="last-name" class="required" type="text">
                        </div>
                    </div>
                    <div class="field email email-address required">
                        <label for="email-address"><span class="label">Email</span><span class="required-star">*</span></label>
                        <input id="email-address" name="email-address" class="email required" type="email" placeholder="someone@website.com">
                    </div>
                    <div class="field tel phone-number">
                        <label for="phone-number"><span class="label">Phone</span></label>
                        <input id="phone-number" name="phone-number" class="phoneUS" type="tel">
                    </div>
                </div>

                <div class="section billing-address">
                    <h3>Billing Address</h3>
                    <div class="field country required">
                        <label for="country">Country<span class="required-star">*</span></label>
                        <select id="country" name="country" class="required">
                            <option value=""></option>
                            <option value="US" selected>United States</option>
                            <option value="CA">Canada</option>
                            <!-- Additional countries will be populated by Bloomerang -->
                        </select>
                    </div>
                    <div class="field street-address required">
                        <label for="street-address"><span class="label">Address</span><span class="required-star">*</span></label>
                        <textarea id="street-address" name="street-address" class="required"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="field text city required">
                            <label for="city"><span class="label">City</span><span class="required-star">*</span></label>
                            <input id="city" name="city" class="required" type="text">
                        </div>
                        <div class="field state required">
                            <label for="state"><span class="label">State</span><span class="required-star">*</span></label>
                            <select id="state" name="state" class="required">
                                <option value=""></option>
                                <!-- States populated by Bloomerang -->
                            </select>
                        </div>
                    </div>
                    <div class="field number zip-code required">
                        <label for="zip-code"><span class="label">ZIP Code</span><span class="required-star">*</span></label>
                        <input id="zip-code" name="zip-code" class="zipcodeUS required" type="number" minlength="5" maxlength="10">
                    </div>
                    <div class="field province required" style="display: none">
                        <label for="province">Province<span class="required-star">*</span></label>
                        <select id="province" name="province" class="required">
                            <option value=""></option>
                            <option value="AB">Alberta</option>
                            <option value="BC">British Columbia</option>
                            <option value="MB">Manitoba</option>
                            <option value="NB">New Brunswick</option>
                            <option value="NL">Newfoundland and Labrador</option>
                            <option value="NT">Northwest Territories</option>
                            <option value="NS">Nova Scotia</option>
                            <option value="NU">Nunavut</option>
                            <option value="ON">Ontario</option>
                            <option value="PE">Prince Edward Island</option>
                            <option value="QC">Quebec</option>
                            <option value="SK">Saskatchewan</option>
                            <option value="YT">Yukon Territory</option>
                        </select>
                    </div>
                    <div class="field text postal-code required" style="display: none">
                        <label for="postal-code"><span class="label">Postal Code</span><span class="required-star">*</span></label>
                        <input id="postal-code" name="postal-code" class="required" type="text">
                    </div>
                </div>

                <div class="section comment">
                    <div class="field text comment">
                        <label for="comment"><span class="label">Comments</span></label>
                        <textarea id="comment" name="comment"></textarea>
                    </div>
                </div>

                <div class="section consent hidden">
                    <div class="field checkbox consent-all">
                        <label for="consent-all">
                            <input id="consent-all" name="consent-all" type="checkbox">
                            <span class="label">I would like to receive or continue receiving updates from Love Life Now Foundation</span>
                        </label>
                    </div>
                    <div class="field checkbox consent-email" style="display: none">
                        <label for="consent-email">
                            <input id="consent-email" name="consent-email" type="checkbox" checked="checked">
                            <span class="label">by email</span>
                        </label>
                    </div>
                    <div class="field checkbox consent-mail" style="display: none">
                        <label for="consent-mail">
                            <input id="consent-mail" name="consent-mail" type="checkbox" checked="checked">
                            <span class="label">by postal mail</span>
                        </label>
                    </div>
                    <div class="field checkbox consent-phone" style="display: none">
                        <label for="consent-phone">
                            <input id="consent-phone" name="consent-phone" type="checkbox" checked="checked">
                            <span class="label">by phone</span>
                        </label>
                    </div>
                </div>

                <div class="section onepay">
                    <h3>Payment Information</h3>
                    <div class="field text payment required" id="stripe-cc-fields">
                        <label for="card-element">
                            <span class="label">Credit or debit card</span>
                            <span class="required-star">*</span>
                        </label>
                        <div id="card-element"></div>
                        <div id="card-errors" role="alert"></div>
                    </div>
                </div>

                <div class="section captcha">
                    <label id="noCaptchaResponseError" class="error noCaptchaResponseError" style="display: none">Please complete the CAPTCHA verification</label>
                    <div id="captcha535552"></div>
                </div>

                <div class="btn-group">
                    <input class="btn btn-submit btn-submit-donation" type="submit" value="Donate Now" id="express-submit" disabled="true">
                </div>
            </form>
        </div>
        <div id="donation-processing-container" style="display: none">
            <h2>Processing...</h2>
            <p>Your transaction is being processed. Please do not close your browser or leave this page.</p>
        </div>
    </template>

    <script type="text/javascript">
        var insertForm535552 = function () {
            var html535552 = document.getElementById('styled-form-content').innerHTML;
            var successHtml535552 = '<div class="donation-success">' +
                '<h2>LLN Thanks You for Your Donation!</h2>' +
                '<p>We acknowledge, with great thanks, your generous donation, which contributes to Love Life Now\'s (LLN) year-round domestic violence (DV) awareness initiatives.</p>' +
                '</div>';

            (function ($) {
                if (Bloomerang.useDonationId('535552')) {
                    Bloomerang.useProcessor('534529', 'StripeExpress', 'pk_live_iZYXFefCkt380zu63aqUIo7y');
                } else {
                    html535552 = '<p style="color: red">Only one donation or event registration form can be used on each page.</p>';
                }

                if (jQuery('#bloomerangForm535552').length) {
                    if (window.ActiveXObject) {
                        html535552 = '<p style="color: red">Your browser does not support the minimum security requirements for keeping your Credit Card information safe when processing payments. Please upgrade your browser.</p>';
                    }
                    jQuery('#bloomerangForm535552').after(html535552);
                    // Show form and hide loading spinner
                    document.getElementById('form-loading').classList.add('hidden');
                    document.getElementById('form-card').classList.add('loaded');

                    Bloomerang.Util.requireStripe(function () {
                        Bloomerang.Util.Stripe = Stripe('pk_live_iZYXFefCkt380zu63aqUIo7y');

                        Bloomerang.useKey('pub_7950352a-2c1c-11f0-abbb-062e8fd2ede7');

                        if (!Bloomerang.StripePaymentElement) {
                            Bloomerang.Util.createInitialIntentForSelfHosted(false);
                        } else {
                            Bloomerang.Util.mountStripePaymentElements(false);
                        }

                        jQuery(".donation-form #express-submit").val("Donate Now");
                        jQuery("#express-submit").attr("disabled", false);
                        Bloomerang.donationFormStripeOnBehalfOfFlag = true;
                        Bloomerang.StripeAccountId = 'acct_1SSjRKH0Bc6gCg0T';
                    });

                    // PayPal/Venmo disabled for this form
                    Bloomerang.Data.PayPal.IsPayPalVenmoEnabled = false;
                    jQuery("#donation-form .recurring-paypal-venmo-label-info").remove();
                    jQuery("#paypal-button-container").remove();
                    Bloomerang.Data.PayPal.IsPayPalPaymentMethodVaultingEnabled = false;
                    Bloomerang.Data.PayPal.IsVenmoSameDayDonationEnabled = false;
                }

                if (Bloomerang.paymentFormLoaded) {
                    return false;
                }
                Bloomerang.paymentFormLoaded = true;

                Bloomerang.reCaptchaV3SiteKey = '';
                Bloomerang.gRecaptchaV3Threshold = 0.5;

                window.captchaLoadCallback = function () {
                    Bloomerang.gRecaptchaLoaded = true;
                };

                window.captchaV3LoadCallback = function () {
                    Bloomerang.gRecaptchaV3Loaded = true;
                };

                if (Bloomerang.donationFormReCaptchaV3SelfHostedFlag === undefined) {
                    function success(result) {
                        Bloomerang.donationFormReCaptchaV3SelfHostedFlag = result.DonationFormReCaptchaV3SelfHostedFlag;
                        initializeCaptcha();
                    }
                    function failure(result) {
                        Bloomerang.donationFormReCaptchaV3SelfHostedFlag = false;
                        initializeCaptcha();
                    }
                    Bloomerang.Api._post('v1/ReCaptchaV3SelfHostedFlag', {}, success, failure);
                } else {
                    initializeCaptcha();
                }

                async function getRecaptchaV3Token() {
                    const token = await new Promise((resolve, reject) => {
                        grecaptcha.ready(function () {
                            grecaptcha.execute(Bloomerang.reCaptchaV3SiteKey, { action: 'submit' }).then(function (token) {
                                resolve(token);
                            });
                        });
                    });
                    return token;
                }

                function initializeCaptcha() {
                    Bloomerang.Util.load('https://www.google.com/recaptcha/api.js?onload=captchaLoadCallback&render=explicit',
                        function () { return Bloomerang.gRecaptchaLoaded; },
                        function () {
                            jQuery('.section.captcha').removeAttr('style');
                            jQuery('form.donation-form').data('captcha-id', grecaptcha.render('captcha535552', { 'sitekey': '6Ld0D04sAAAAAM1V1FzEL8QeC4kvMV8RgOnynJpe' }));

                            if ((Bloomerang.donationFormReCaptchaV3Flag && Bloomerang.isBloomerangHostedForm && Bloomerang.isDonationForm) ||
                                (Bloomerang.donationFormReCaptchaV3SelfHostedFlag && !Bloomerang.isBloomerangHostedForm && Bloomerang.reCaptchaV3SiteKey && Bloomerang.isDonationForm)) {
                                jQuery('.section.captcha').attr('style', 'display: none');
                            }
                        }, true, true);

                    if ((Bloomerang.donationFormReCaptchaV3Flag && Bloomerang.isBloomerangHostedForm && Bloomerang.isDonationForm) ||
                        (Bloomerang.donationFormReCaptchaV3SelfHostedFlag && !Bloomerang.isBloomerangHostedForm && Bloomerang.isDonationForm && Bloomerang.reCaptchaV3SiteKey)) {
                        Bloomerang.Util.load('https://www.google.com/recaptcha/api.js?onload=captchaV3LoadCallback&render=' + Bloomerang.reCaptchaV3SiteKey,
                            function () { return Bloomerang.gRecaptchaV3Loaded; },
                            function () {
                                grecaptcha.ready(function () {
                                    grecaptcha.execute(Bloomerang.reCaptchaV3SiteKey, { action: 'submit' }).then(function (token) {
                                        async function success(result) {
                                            if (parseFloat(result.Score) < Bloomerang.gRecaptchaV3Threshold) {
                                                Bloomerang.isForcePuzzle = true;
                                                jQuery('.section.captcha').attr('style', 'display: block');
                                            } else {
                                                const initialRecaptchaV3Token = await getRecaptchaV3Token();
                                                Bloomerang.captchaResponseV3(initialRecaptchaV3Token);
                                                setInterval(async () => {
                                                    const recaptchaV3Token = await getRecaptchaV3Token();
                                                    Bloomerang.captchaResponseV3(recaptchaV3Token);
                                                }, 80000);
                                            }
                                        }
                                        function failure(result) {
                                            Bloomerang.isForcePuzzle = true;
                                            jQuery('.section.captcha').attr('style', 'display: block');
                                        }
                                        var data = { token: token, isSelfHosted: !Bloomerang.isBloomerangHostedForm };
                                        Bloomerang.Api._post('v1/ReCaptchaV3', data, success, failure);
                                    });
                                });
                            }, true, true);
                    }
                }

                // Transaction fee configuration
                Bloomerang.transactionFee = 0.3;
                Bloomerang.transactionFeeRate = 0.032;
                Bloomerang.transactionFeeEft = 0.3;
                Bloomerang.transactionFeeRateEft = 0.018;
                Bloomerang.transactionFeePayPal = 0.49;
                Bloomerang.transactionFeeRatePayPal = 0.032;

                Bloomerang.useKey('pub_7950352a-2c1c-11f0-abbb-062e8fd2ede7');
                Bloomerang.isDonationForm = true;

                Bloomerang.Util.getDonationAmount = function () {
                    return Number(accounting.unformat(jQuery(".donation-form .section.donation input[name='donation-level']:checked").val() || jQuery(".donation-form #donation-amount").val()));
                };

                // Register callbacks for submission
                Bloomerang.Widget.Donation.OnSubmit = function (args) {
                    jQuery(".btn-submit-donation").val("Donating...").prop("disabled", true).addClass("disabled");
                    var val = function (selector) { return jQuery(selector).val(); };
                    var country = val(".donation-form #country");
                    var state = Bloomerang.Util.getCorrectState(country, val(".donation-form #state"), val(".donation-form #province"));
                    var zipCode = Bloomerang.Util.getCorrectZipCode(country, val(".donation-form #zip-code"), val(".donation-form #postal-code"));
                    Bloomerang.Account
                        .individual()
                        .firstName(val(".donation-form #first-name"))
                        .lastName(val(".donation-form #last-name"))
                        .homeEmail(val(".donation-form #email-address"))
                        .homePhone(val(".donation-form #phone-number"))
                        .homeAddress(val(".donation-form #street-address"),
                            val(".donation-form #city"),
                            state,
                            zipCode,
                            country)
                        .applyDonationCustomFields();

                    // Handle GDPR consent preferences
                    if (jQuery(".donation-form #consent-all").prop("checked")) {
                        Bloomerang.Account.optedInStatus(
                            jQuery(".donation-form #consent-email").prop("checked"),
                            jQuery(".donation-form #consent-mail").prop("checked"),
                            jQuery(".donation-form #consent-phone").prop("checked")
                        );
                    }

                    Bloomerang.Donation
                        .note(val(".donation-form #comment"))
                        .applyDonationCustomFields();
                };

                Bloomerang.ValidateDonationFormCaptcha = function () {
                    if (typeof (grecaptcha) !== "undefined" && jQuery("#captcha" + Bloomerang.Data.WidgetIds.Donation).children().length) {
                        var captchaResponse = grecaptcha.getResponse(jQuery(".donation-form").data("captcha-id"));
                        if (captchaResponse) {
                            jQuery(".donation-form .noCaptchaResponseError").hide();
                            Bloomerang.captchaResponse(captchaResponse);
                            return true;
                        } else {
                            jQuery(".donation-form .noCaptchaResponseError").show();
                            return false;
                        }
                    } else return true;
                };

                Bloomerang.Api.OnSuccess = Bloomerang.Widget.Donation.OnSuccess = function (response) {
                    var formContainer = jQuery("#donation-form-container");
                    formContainer.html(successHtml535552);
                    var distance = 100;
                    var offset = formContainer.offset().top;
                    var offsetTop = offset > distance ? offset - distance : offset;
                    jQuery('html, body').animate({ scrollTop: offsetTop }, 500);
                };

                Bloomerang.Api.OnError = Bloomerang.Widget.Donation.OnError = function (response) {
                    jQuery(".btn-submit-donation").val("Donate Now").prop("disabled", false).removeClass("disabled");
                    jQuery("#donation-form-container .errors").removeClass("hidden").text(response.Message);
                    var distance = 100;
                    var offset = jQuery("#donation-form-container .errors").offset().top;
                    var offsetTop = offset > distance ? offset - distance : offset;
                    jQuery('html, body').animate({ scrollTop: offsetTop }, 500);
                    if (typeof (grecaptcha) !== "undefined" && jQuery("#captcha" + Bloomerang.Data.WidgetIds.Donation).children().length) {
                        grecaptcha.reset(jQuery(".donation-form").data("captcha-id"));
                    }
                };

                // Custom field helpers
                Bloomerang.Util.applyDonationCustomFields = function (obj, type) {
                    obj.clearCustomFields();
                    jQuery(".donation-form .section.custom-fields :input:not(a > input, select)[id*=" + type + "]").each(function () {
                        if (jQuery(this).val() && jQuery.trim(jQuery(this).val())) {
                            obj.customFreeformField(jQuery(this).attr("id").substring(jQuery(this).attr("id").indexOf('_') + 1), jQuery(this).val());
                        }
                    });
                    jQuery(".donation-form .section.custom-fields select[id*=" + type + "]").each(function () {
                        if (jQuery(this).val() && jQuery.trim(jQuery(this).val())) {
                            obj.customPickField(jQuery(this).attr("id").substring(jQuery(this).attr("id").indexOf('_') + 1), jQuery(this).val());
                        }
                    });
                };

                Bloomerang.Donation.applyDonationCustomFields = function () {
                    Bloomerang.Util.applyDonationCustomFields(this, "Donation");
                    return this;
                };

                Bloomerang.Account.applyDonationCustomFields = function () {
                    Bloomerang.Util.applyDonationCustomFields(this, "Account");
                    return this;
                };

                // Recurring donation toggle
                jQuery(".donation-form #recurring").change(function () {
                    var isRecurring = jQuery(this).prop("checked");
                    jQuery(".donation-form .field.frequency, .donation-form .field.start-date").toggle(isRecurring);
                });

                // Form validation
                jQuery("#donation-form-container form").validate({
                    submitHandler: function () {
                        if (!Bloomerang.ValidateDonationFormCaptcha()) {
                            return false;
                        }
                        Bloomerang.Api.OnSubmit = Bloomerang.Widget.Donation.OnSubmit;
                        Bloomerang.Api.OnSuccess = Bloomerang.Widget.Donation.OnSuccess;
                        Bloomerang.Api.OnError = Bloomerang.Widget.Donation.OnError;
                        collectPayment();
                    }
                });

            })(jQuery);
        };

        var startBloomerangLoad = function () {
            if (window.bloomerangLoadStarted == undefined) {
                window.bloomerangLoadStarted = true;
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = 'https://crm.bloomerang.co/Content/Scripts/Api/Bloomerang-v2.js?nocache=1765570449';
                document.getElementsByTagName('head')[0].appendChild(script);
                waitForBloomerangLoad(function () { Bloomerang.Util.requireJQueryValidation(function () { insertForm535552(); }) });
            }
            else {
                waitForBloomerangLoad(function () { Bloomerang.Util.requireJQueryValidation(function () { insertForm535552(); }) });
            }
        };

        var waitForBloomerangLoad = function (callback) {
            if (typeof (Bloomerang) === 'undefined' || !Bloomerang._isReady) {
                setTimeout(function () { waitForBloomerangLoad(callback) }, 500);
            }
            else {
                if (true) {
                    callback();
                } else {
                    window.bloomerangLoadStarted = undefined;
                    Bloomerang = undefined;
                    startBloomerangLoad();
                }
            }
        };

        startBloomerangLoad();
    </script>
</body>

</html>
